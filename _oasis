OASISFormat: 0.4
Name:        kiln
Version:     0.1
Synopsis:    The reference compiler for the Brick language
Authors:     Katherine Whitlock
License:     BSD-3-clause
Plugins:     DevFiles (0.4)
BuildTools:  ocamlbuild
BuildDepends: core, str, res, cfg, bytes, threads

Library sedlexing
  Modules: Sedlexing
  Path: sedlex/src/lib
  Install: false
  BuildDepends: gen

Library sedlex
  FindlibName: sedlex
  Modules: Sedlex_cset, Unicode63, Sedlex, Ppx_sedlex
  Path: sedlex/src/syntax
  Install: false

Executable ppx_sedlex
  Path: sedlex/src/syntax
  MainIs: ppx_sedlex.ml
  BuildDepends: sedlex
  CompiledObject: best

Library frontend
  Modules: Frontend
  Path:    frontend
  Install: false
  BuildTools: menhir #, ppx_sedlex
  BuildDepends: util, yojson, textutils,
                sedlex, sedlexing, batteries,
                menhirLib

#Library typing
#  Modules: Typedtree
#  Path:    typing
#  Install: false
#  BuildDepends: frontend, util

Library util
  Modules: Util
  Path:    util
  Install: false

Library codegen
  Modules: Codegen
  Path:    codegen
  Install: false
  BuildDepends: frontend,
                ppx_monadic,
                ollvm,
                llvm,
                llvm.analysis

Executable kiln
  Path:           driver
  BuildDepends:   frontend, codegen,
                  util, yojson
  MainIs:         kiln.ml
  CompiledObject: native

# Library kiln
#   Modules: Kiln
#   Path: lib
#   Install: false
#   BuildDepends: frontend, util,
#                 codegen, driver
                  
